name = "receipt-sender"
main = "src/index.js"
compatibility_date = "2025-12-01"

# 例: 独自ドメインを使う場合は Cloudflare 側でルーティング設定（後述）
# routes = [{ pattern = "api.worlddivinelight.org/*", zone_name = "worlddivinelight.org" }]

[[d1_databases]]
binding = "RECEIPTS_DB"
database_name = "receipts"
database_id = "YOUR_D1_DATABASE_ID"

[[r2_buckets]]
binding = "RECEIPTS_BUCKET"
bucket_name = "YOUR_R2_BUCKET_NAME"

[vars]
HUBSPOT_MEMBER_ID_PROPERTY = "member_id"
FROM_EMAIL = "World Divine Light <receipt@worlddivinelight.org>"
ADMIN_UI_ORIGIN = "https://admin.mahikari.org"
RECEIPT_PORTAL_URL = "https://kamikumite.worlddivinelight.org/receipt/"

OTP_TTL_MINUTES = "10"
SEND_BATCH_SIZE = "50"
OTP_SALT = "WDL_OTP_SALT_v1_change_me"
